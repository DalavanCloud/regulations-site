language: python
python:
    - "2.6"
    - "2.7"
env:
    global:
        secure: "fuh6Jmkc4wDS7xil7CBcKg02bUImn8aRXx2jFuD4rDr9h6WQPsZwi56wxOJ5PZ6UXqbSOmjrALOQCODhusWPomIgz+8tbNsTwM5AkchuNz4lxeejPH4bq88LkuGz1G5GhenIEQh3MnMKx9Nv8OMN6kRdIjLVJV7Fqbdl5vyqvuE="
        secure: "UzPolNJxGuhWpmiq6BPIO+or/B+i/Qo9/G4NRMBaSVcEXo5GjWoY/q/vQ/3R3Yfb7OuVS8CN1J5O+uYjfDwUAjlwbDD0H5/lAYCsXf+JZpbwwhV6d2RqFOUGEUFHQmYgE88pJ5a1wzc+LUepxhaCd4c9hawZG7EaalU08TdFlHg="
before_script:
    - curl https://gist.github.com/santiycr/5139565/raw/sauce_connect_setup.sh | bash
install:
    - pip install zc.buildout distribute selenium
    - buildout
    - echo "yes" | sudo add-apt-repository ppa:chris-lea/node.js
    - sudo apt-get update
    - sudo apt-get install nodejs phantomjs
    - sudo npm install -g grunt-cli grunt-init bower
    - sudo npm install
    - bower install
    - cp example-config.json config.json
script:
    - ./require.sh
    - ./bin/test
    - ./dummy_api/start.sh
    - echo 'API_BASE = "http://localhost:8282/"' >> regulations/settings/local_settings.py
    - ./run_server.sh &
    - sleep 5
    - python regulations/tests/selenium/example_test.py
    - grunt test
