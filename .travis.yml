language: python
python:
    - "2.6"
    - "2.7"
env:
    global:
        secure: "WTQN5bI+FVaZRoSHo4HlRFBI4kzeU84IAFEPCpikx+/pnDcxCWwmzZGMjSS3mtd/gCpPSgshDNdQki8vUxyW6hn93UW2WftGk1pilVVG2Znnek293gfCXC1DaiaxtembVKMCQgJREW59keX4tt/19H63GnDk+YL1PxulBxXyFFg="
        secure: "RgYv4jQ1ImeDOfJ6IIpedtBtWgTD7YxqOrapoX0Fzxf7xXR3RtsKNO/jLDf86keRg28BoY87AW+BHWH7KoFj22hCVcNF0dcgJmQ1xBXK8JMkvicGvyZ+g5CbbRqsYEmgeqhZfJ+TGXHR/k6uQb0zD4VfGvpj64TWOyORZQiyrVc="
before_script:
    - curl https://gist.github.com/santiycr/5139565/raw/sauce_connect_setup.sh | bash
install:
    - pip install zc.buildout distribute selenium
    - buildout
    - echo "yes" | sudo add-apt-repository ppa:chris-lea/node.js
    - sudo apt-get update
    - sudo apt-get install nodejs phantomjs
    - sudo npm install -g grunt-cli grunt-init bower
    - sudo npm install
    - bower install
    - cp example-config.json config.json
script:
    - ./require.sh
    - ./bin/test
    - ./dummy_api/start.sh
    - echo 'API_BASE = "http://localhost:8282/"' >> regulations/settings/local_settings.py
    - ./run_server.sh &
    - sleep 5
    - python regulations/tests/selenium/example_test.py
    - grunt test
