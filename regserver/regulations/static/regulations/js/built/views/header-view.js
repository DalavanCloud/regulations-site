define("header-view",["jquery","underscore","backbone","dispatch"],function(e,t,n,r){var i=n.View.extend({el:".reg-header",idMap:{"table-of-contents":"#menu-link",timeline:"#timeline-link",search:"#search-link"},initialize:function(){var t=r.getDrawerState();this.$activeEls=e("#menu, #site-header, #content-body, #primary-footer"),this.$tocLinks=e(".toc-nav-link"),t&&this.changeActiveTab(t),document.documentElement.clientWidth>1100?e(".toc-toggle").addClass("open"):this.drawerState()},events:{"click .toc-toggle":"openDrawer","click .toc-nav-link":"toggleDrawerTab"},updateDrawerState:function(t){typeof this.$activeEls!="undefined"&&(r.trigger("toc:toggle",t+" toc"),e("#panel-link").toggleClass("open"),this.$activeEls.toggleClass("active"))},openDrawer:function(e){e.preventDefault(),this.drawerState()},drawerState:function(){var t=e(".toc-toggle").hasClass("open")?"close":"open";this.updateDrawerState(t)},toggleDrawerTab:function(n){n.preventDefault();var i=e(n.target),s=t.last(i.closest("a").attr("href").split("#"));this.changeActiveTab(s),r.trigger("drawer:stateChange",s)},changeActiveTab:function(t){this.$tocLinks.removeClass("current"),e(this.idMap[t]).addClass("current"),e(".panel").css("left")==="-200px"&&this.updateDrawerState("open")}});return i});